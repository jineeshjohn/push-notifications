<!DOCTYPE html>
<html lang="en-us">

<head>
    <meta charset="UTF-8">
    <title>Push-notifications by jineeshjohn</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://cdn.firebase.com/js/client/2.4.1/firebase.js"></script>
</head>

<body>
    <textarea id='registeredIds'></textarea>
    <button onclick="getALLIds()">Get All ids</button>
    <script>
    var ref = new Firebase("https://pushnotifcation.firebaseio.com/");


    ref.authAnonymously();

    var postsRef = ref.child("subscriptions");
    var regIds = {
        "registration_ids": []
    }
    var allIds;
    postsRef.on("value", function(snapshot) {
        console.log(999, snapshot.val());
        allIds = snapshot.val();
        for (var p in allIds) {
            regIds.registration_ids.push(allIds[p].clientId);
        }
    }, function(errorObject) {
        console.log("The read failed: " + errorObject.code);
    });

    function getALLIds() {
        // Register the callback to be fired every time auth state changes



    document.getElementById('registeredIds').value = JSON.stringify(regIds);
    }

    // This is my s1 changes
    </script>
</body>

</html>
